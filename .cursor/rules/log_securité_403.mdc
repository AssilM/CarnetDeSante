---
description:
globs:
alwaysApply: false
---
- **Logger systématiquement les réponses 403 « Forbidden »**
  - Lorsqu'une réponse est envoyée avec le code HTTP `403`, le middleware de logging doit écrire un log de sécurité explicite.
  - Le log doit contenir au minimum : `timestamp`, `method`, `url`, `status`, `ip`, `userId`, `userRole`.
  - Format conseillé :
    ```text
    [SECURITY] 403 Forbidden | user=<id> role=<role> | <METHOD> <URL> - <IP>
    ```
  - Utiliser `console.warn` (ou l'outil de log centralisé) pour distinguer ces événements.

- **Objectifs**
  - Faciliter l'audit des tentatives d'accès non autorisées.
  - Aider à détecter les scans ou abus potentiels.

- **Tests recommandés**
  1. Appel d'une route protégée sans rôle approprié → vérifier la présence d'un log `[SECURITY] 403 Forbidden` dans la sortie serveur.
  2. Appel d'une route avec JWT invalide → même vérification.
